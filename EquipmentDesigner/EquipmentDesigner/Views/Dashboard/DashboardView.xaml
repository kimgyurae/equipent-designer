<UserControl x:Class="EquipmentDesigner.Views.Dashboard.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:lex="http://wpflocalizeextension.codeplex.com"
             xmlns:services="clr-namespace:EquipmentDesigner.Services"
             lex:LocalizeDictionary.DesignCulture="ko"
             lex:ResxLocalizationProvider.DefaultAssembly="EquipmentDesigner"
             lex:ResxLocalizationProvider.DefaultDictionary="Resources.Strings"
             mc:Ignorable="d"
             Background="{StaticResource Brush.Background.Secondary}"
             d:DesignHeight="800" d:DesignWidth="1200">

    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top Bar with Language Selector -->
        <Border Grid.Row="0" 
                Background="{StaticResource Brush.Surface.Primary}"
                BorderBrush="{StaticResource Brush.Border.Primary}"
                BorderThickness="0,0,0,1"
                Padding="24,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Header Section -->
                <StackPanel Grid.Column="0">
                    <TextBlock Text="{lex:Loc Key=Dashboard_Title}"
                            Style="{StaticResource Typography.H3}"
                            Foreground="{StaticResource Brush.Text.Primary}"/>
                    <TextBlock Text="{lex:Loc Key=Dashboard_Subtitle}"
                            Style="{StaticResource Typography.Body.Large}"
                            Foreground="{StaticResource Brush.Text.Secondary}"
                            Margin="0,8,0,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1"/>

                <!-- Language Selector -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="{lex:Loc Key=Language}"
                            Style="{StaticResource Typography.Body}"
                            Foreground="{StaticResource Brush.Text.Secondary}"
                            VerticalAlignment="Center"
                            Margin="0,0,12,0"/>
                    <ComboBox Style="{StaticResource LanguageSelectorComboBox}"
                                ItemsSource="{Binding Source={x:Static services:LanguageService.Instance}, Path=AvailableLanguages}"
                                SelectedItem="{Binding Source={x:Static services:LanguageService.Instance}, Path=SelectedLanguage, Mode=TwoWay}"
                                DisplayMemberPath="DisplayName"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel Margin="{StaticResource Spacing.Padding.2XL}">
                <!-- Admin Mode Panel (Hidden by default, toggle with Ctrl+Shift+F10) -->
                <Border Background="{StaticResource Brush.Surface.Primary}"
                        BorderBrush="{StaticResource Brush.Status.Danger.Border}"
                        BorderThickness="2"
                        CornerRadius="{StaticResource Radius.LG}"
                        Padding="16"
                        Margin="0,0,0,16"
                        Visibility="{Binding IsAdminModeVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Admin Header -->
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,12">
                            <Path Data="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-4h2v2h-2v-2zm1-10c-1.66 0-3 1.34-3 3h2c0-.55.45-1 1-1s1 .45 1 1c0 1-1.5 1.25-1.5 3.5h2c0-1.5 1.5-1.75 1.5-3.5 0-1.66-1.34-3-3-3z"
                                  Fill="{StaticResource Brush.Status.Danger}"
                                  Width="20" Height="20"
                                  Stretch="Uniform"
                                  VerticalAlignment="Center"
                                  Margin="0,0,8,0"/>
                            <TextBlock Text="Admin Mode"
                                       Style="{StaticResource Typography.Body.Large}"
                                       FontWeight="{StaticResource Font.Weight.SemiBold}"
                                       Foreground="{StaticResource Brush.Status.Danger}"
                                       VerticalAlignment="Center"/>
                            <TextBlock Text="(Ctrl+Shift+F10 to hide)"
                                       Style="{StaticResource Typography.Body.Small}"
                                       Foreground="{StaticResource Brush.Text.Secondary}"
                                       VerticalAlignment="Center"
                                       Margin="12,0,0,0"/>
                        </StackPanel>

                        <!-- Admin Actions - WrapPanel for extensibility -->
                        <WrapPanel Grid.Row="1" Orientation="Horizontal">
                            <Button Command="{Binding DeleteAllIncompleteWorkflowsCommand}"
                                    Background="{StaticResource Brush.Status.Danger.Background}"
                                    BorderBrush="{StaticResource Brush.Status.Danger.Border}"
                                    BorderThickness="{StaticResource Border.Thin}"
                                    Padding="12,8"
                                    Margin="0,0,8,8"
                                    Cursor="Hand">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="Button">
                                                    <Border x:Name="ButtonBorder"
                                                            Background="{StaticResource Brush.Status.Danger.Background}"
                                                            BorderBrush="{StaticResource Brush.Status.Danger.Border}"
                                                            BorderThickness="{StaticResource Border.Thin}"
                                                            CornerRadius="{StaticResource Radius.MD}"
                                                            Padding="{TemplateBinding Padding}">
                                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="ButtonBorder" Property="Background" Value="{StaticResource Brush.Status.Danger.Border}"/>
                                                        </Trigger>
                                                        <Trigger Property="IsEnabled" Value="False">
                                                            <Setter TargetName="ButtonBorder" Property="Opacity" Value="0.5"/>
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </Button.Style>
                                <StackPanel Orientation="Horizontal">
                                    <Path Data="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4h-3.5z"
                                          Fill="{StaticResource Brush.Status.Danger}"
                                          Width="14" Height="14"
                                          Stretch="Uniform"
                                          VerticalAlignment="Center"
                                          Margin="0,0,6,0"/>
                                    <TextBlock Text="Delete All Incomplete Workflows"
                                               Style="{StaticResource Typography.Body}"
                                               Foreground="{StaticResource Brush.Status.Danger}"
                                               VerticalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                            <!-- Add more admin buttons here in the future -->
                        </WrapPanel>
                    </Grid>
                </Border>

                <!-- Incomplete Workflows Section -->
                <Border Background="{StaticResource Brush.Status.Warning.Background}"
                        BorderBrush="{StaticResource Brush.Status.Warning.Border}"
                        BorderThickness="{StaticResource Border.Thin}"
                        CornerRadius="{StaticResource Radius.LG}"
                        Padding="16"
                        Margin="0,0,0,32"
                        Visibility="{Binding HasIncompleteWorkflows, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Warning Icon -->
                        <Path Grid.Column="0"
                              Data="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"
                              Fill="{StaticResource Brush.Status.Warning}"
                              Width="20" Height="20"
                              Stretch="Uniform"
                              VerticalAlignment="Top"
                              Margin="0,2,12,0"/>

                        <StackPanel Grid.Column="1">
                            <TextBlock Text="{lex:Loc Key=Dashboard_IncompleteWorkflows}"
                                       Style="{StaticResource Typography.Body.Large}"
                                       Foreground="{StaticResource Brush.Status.Warning}"
                                       FontWeight="{StaticResource Font.Weight.Medium}"/>
                            <TextBlock Text="{Binding IncompleteWorkflowsMessage}"
                                       Style="{StaticResource Typography.Body.Large}"
                                       Foreground="{StaticResource Brush.Text.Secondary}"
                                       Margin="0,4,0,16"/>

                            <!-- Workflow Items List -->
                            <ScrollViewer VerticalScrollBarVisibility="Auto" 
                                          HorizontalScrollBarVisibility="Disabled"
                                          MaxHeight="256">
                                <ItemsControl ItemsSource="{Binding IncompleteWorkflows}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border x:Name="WorkflowItemBorder"
                                                    Background="{StaticResource Brush.Surface.Primary}"
                                                    BorderBrush="{StaticResource Brush.Border.Primary}"
                                                    BorderThickness="{StaticResource Border.Thin}"
                                                    CornerRadius="{StaticResource Radius.LG}"
                                                    Padding="12"
                                                    Margin="0,0,0,8"
                                                    Cursor="Hand">
                                                <Border.InputBindings>
                                                    <MouseBinding MouseAction="LeftClick"
                                                                  Command="{Binding DataContext.ResumeWorkflowCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                                  CommandParameter="{Binding}"/>
                                                </Border.InputBindings>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>

                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="{Binding StartedFrom}"
                                                                   Style="{StaticResource Typography.Body.Large}"
                                                                   Foreground="{StaticResource Brush.Text.Primary}"/>

                                                        <TextBlock Text="{Binding ComponentState}"
                                                                   Style="{StaticResource Typography.Body.Large}"
                                                                   Foreground="{StaticResource Brush.Text.Primary}"
                                                                           Margin="12,0,0,0"/>
                                                    </StackPanel>
                                                    <TextBlock Grid.Column="1"
                                                               Text="{Binding Date}"
                                                               Style="{StaticResource Typography.Body.Large}"
                                                               Foreground="{StaticResource Brush.Text.Secondary}"
                                                               VerticalAlignment="Center"/>

                                                    <!-- Delete Button (visible on hover) -->
                                                    <Button x:Name="DeleteButton"
                                                            Grid.Column="2"
                                                            Command="{Binding DataContext.DeleteWorkflowCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                            CommandParameter="{Binding}"
                                                            Background="Transparent"
                                                            BorderThickness="0"
                                                            Cursor="Hand"
                                                            Padding="6"
                                                            Margin="8,0,0,0"
                                                            Opacity="0"
                                                            VerticalAlignment="Center"
                                                            ToolTip="{lex:Loc Key=DeleteWorkflow_Tooltip}">
                                                        <Path Data="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4h-3.5z"
                                                              Fill="{StaticResource Brush.Text.Secondary}"
                                                              Width="16" Height="16"
                                                              Stretch="Uniform"/>
                                                    </Button>
                                                </Grid>
                                            </Border>
                                            <DataTemplate.Triggers>
                                                <Trigger SourceName="WorkflowItemBorder" Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="DeleteButton" Property="Opacity" Value="1"/>
                                                </Trigger>
                                                <Trigger SourceName="DeleteButton" Property="IsMouseOver" Value="True">
                                                    <Setter TargetName="DeleteButton" Property="Opacity" Value="1"/>
                                                </Trigger>
                                            </DataTemplate.Triggers>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Create New Component Section -->
                <StackPanel Margin="0,0,0,32">
                    <TextBlock Text="{lex:Loc Key=Dashboard_CreateNewComponent}"
                               Style="{StaticResource Typography.H4}"
                               Foreground="{StaticResource Brush.Text.Primary}"
                               Margin="0,0,0,16"/>

                    <UniformGrid Rows="1" Columns="4">
                        <!-- Equipment Button -->
                        <Border BorderBrush="{StaticResource Brush.Border.Primary}"
                                BorderThickness="{StaticResource Border.Thin}"
                                CornerRadius="{StaticResource Radius.LG}"
                                Margin="0,0,16,0"
                                Cursor="Hand"
                                Height="96">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="Background" Value="{StaticResource Brush.Surface.Primary}"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="{StaticResource Brush.Status.Warning.Background}"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            
                            <Border.InputBindings>
                                <MouseBinding MouseAction="LeftClick" Command="{Binding CreateEquipmentCommand}"/>
                            </Border.InputBindings>
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Path Data="M21 8.00002C20.9996 7.6493 20.9071 7.30483 20.7315 7.00119C20.556 6.69754 20.3037 6.44539 20 6.27002L13 2.27002C12.696 2.09449 12.3511 2.00208 12 2.00208C11.6489 2.00208 11.304 2.09449 11 2.27002L4 6.27002C3.69626 6.44539 3.44398 6.69754 3.26846 7.00119C3.09294 7.30483 3.00036 7.6493 3 8.00002V16C3.00036 16.3508 3.09294 16.6952 3.26846 16.9989C3.44398 17.3025 3.69626 17.5547 4 17.73L11 21.73C11.304 21.9056 11.6489 21.998 12 21.998C12.3511 21.998 12.696 21.9056 13 21.73L20 17.73C20.3037 17.5547 20.556 17.3025 20.7315 16.9989C20.9996 16.3508 21 16 21 16V8.00002Z 
                                            M3.3 7L12 12L20.7 7 
                                            M12 22V12"
                                      Stroke="{StaticResource Brush.Text.Primary}"
                                      StrokeThickness="2"
                                      Fill="Transparent"
                                      Width="24" Height="24"
                                      Stretch="Uniform"
                                      HorizontalAlignment="Center"/>
                                <TextBlock Text="{lex:Loc Key=Dashboard_Equipment}"
                                           Style="{StaticResource Typography.Body.Large}"
                                           Foreground="{StaticResource Brush.Text.Primary}"
                                           HorizontalAlignment="Center"
                                           Margin="0,12,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- System Button -->
                        <Border BorderBrush="{StaticResource Brush.Border.Primary}"
                                BorderThickness="{StaticResource Border.Thin}"
                                CornerRadius="{StaticResource Radius.LG}"
                                Margin="0,0,16,0"
                                Cursor="Hand"
                                Height="96">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="Background" Value="{StaticResource Brush.Surface.Primary}"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="{StaticResource Brush.Status.Warning.Background}"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            
                            <Border.InputBindings>
                                <MouseBinding MouseAction="LeftClick" Command="{Binding CreateSystemCommand}"/>
                            </Border.InputBindings>
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Path Data="M12 2L2 7l10 5 10-5M2 17l10 5 10-5M2 12l10 5 10-5"
                                      Stroke="{StaticResource Brush.Text.Primary}"
                                      StrokeThickness="2"
                                      Fill="Transparent"
                                      Width="24" Height="24"
                                      Stretch="Uniform"
                                      HorizontalAlignment="Center"/>
                                <TextBlock Text="{lex:Loc Key=Dashboard_System}"
                                           Style="{StaticResource Typography.Body.Large}"
                                           Foreground="{StaticResource Brush.Text.Primary}"
                                           HorizontalAlignment="Center"
                                           Margin="0,12,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Unit Button -->
                        <Border BorderBrush="{StaticResource Brush.Border.Primary}"
                                BorderThickness="{StaticResource Border.Thin}"
                                CornerRadius="{StaticResource Radius.LG}"
                                Margin="0,0,16,0"
                                Cursor="Hand"
                                Height="96">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="Background" Value="{StaticResource Brush.Surface.Primary}"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="{StaticResource Brush.Status.Warning.Background}"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            
                            <Border.InputBindings>
                                <MouseBinding MouseAction="LeftClick" Command="{Binding CreateUnitCommand}"/>
                            </Border.InputBindings>
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Path Stroke="{StaticResource Brush.Text.Primary}"
                                      StrokeThickness="2" 
                                      StrokeStartLineCap="Round" 
                                      StrokeEndLineCap="Round" 
                                      StrokeLineJoin="Round"
                                      Data="M12 8V4H8 
                                            M18 8H6c-1.10457 0-2 .89543-2 2v8c0 1.1046.89543 2 2 2h12c1.1046 0 2-.8954 2-2v-8c0-1.10457-.8954-2-2-2z 
                                            M2 14h2 
                                            M20 14h2 
                                            M15 13v2 
                                            M9 13v2"
                                      Stretch="Uniform"
                                      Width="24" Height="24"
                                      HorizontalAlignment="Center"/>
                                <TextBlock Text="{lex:Loc Key=Dashboard_Unit}"
                                           Style="{StaticResource Typography.Body.Large}"
                                           Foreground="{StaticResource Brush.Text.Primary}"
                                           HorizontalAlignment="Center"
                                           Margin="0,12,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Device Button -->
                        <Border BorderBrush="{StaticResource Brush.Border.Primary}"
                                BorderThickness="{StaticResource Border.Thin}"
                                CornerRadius="{StaticResource Radius.LG}"
                                Margin="0,0,16,0"
                                Cursor="Hand"
                                Height="96">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="Background" Value="{StaticResource Brush.Surface.Primary}"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="{StaticResource Brush.Status.Warning.Background}"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            
                            <Border.InputBindings>
                                <MouseBinding MouseAction="LeftClick" Command="{Binding CreateDeviceCommand}"/>
                            </Border.InputBindings>
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <Path Data="M12 20c2.1217 0 4.1566-.8429 5.6569-2.3431C19.1571 16.1566 20 14.1217 20 12c0-2.1217-.8429-4.15656-2.3431-5.65685C16.1566 4.84285 14.1217 4 12 4c-2.12173 0-4.15656.84285-5.65685 2.34315C4.84285 7.84344 4 9.87827 4 12c0 2.1217.84285 4.1566 2.34315 5.6569C7.84344 19.1571 9.87827 20 12 20z M12 14c.5304 0 1.0391-.2107 1.4142-.5858.3751-.3751.5858-.8838.5858-1.4142 0-.5304-.2107-1.0391-.5858-1.4142C13.0391 10.2107 12.5304 10 12 10c-.5304 0-1.0391.2107-1.4142.5858C10.2107 10.9609 10 11.4696 10 12c0 .5304.2107 1.0391.5858 1.4142C10.9609 13.7893 11.4696 14 12 14z M12 2v2 M12 22v-2 M17 20.6601l-1-1.73 M11 10.27L7 3.33997 M20.66 17l-1.73-1 M3.34003 7l1.73 1 M14 12h8 M2 12h2 M20.66 7l-1.73 1 M3.34003 17l1.73-1 M17 3.33997l-1 1.73 M11 13.73l-4 6.93"
                                      Fill="Transparent"
                                      Stroke="{StaticResource Brush.Text.Primary}"
                                      StrokeThickness="2"
                                      StrokeStartLineCap="Round"
                                      StrokeEndLineCap="Round"
                                      StrokeLineJoin="Round"
                                      Width="24" Height="24"
                                      Stretch="Uniform"
                                      HorizontalAlignment="Center"/>
                                <TextBlock Text="{lex:Loc Key=Dashboard_Device}"
                                           Style="{StaticResource Typography.Body.Large}"
                                           Foreground="{StaticResource Brush.Text.Primary}"
                                           HorizontalAlignment="Center"
                                           Margin="0,12,0,0"/>
                            </StackPanel>
                        </Border>
                    </UniformGrid>
                </StackPanel>

                <!-- Section Separator -->
                <Border Height="1"
                        Background="{StaticResource Brush.Border.Primary}"
                        Margin="0,0,0,32"/>

                <!-- Component Lists Section (2x2 Grid) -->
                <StackPanel Margin="0,0,0,16">
                    <TextBlock Text="{lex:Loc Key=Dashboard_ComponentLists}"
                               Style="{StaticResource Typography.H4}"
                               Foreground="{StaticResource Brush.Text.Primary}"/>
                </StackPanel>

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="24"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Equipments Card -->
                    <Border Grid.Row="0" Grid.Column="0"
                            Background="{StaticResource Brush.Surface.Primary}"
                            BorderBrush="{StaticResource Brush.Border.Primary}"
                            BorderThickness="{StaticResource Border.Thin}"
                            CornerRadius="{StaticResource Radius.LG}"
                            Padding="24"
                            Margin="0,0,0,24"
                            MinHeight="140">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                <TextBlock Text="{lex:Loc Key=Dashboard_Equipments}"
                                           Style="{StaticResource Typography.H4}"
                                           Foreground="{StaticResource Brush.Text.Primary}"/>
                                <TextBlock Style="{StaticResource Typography.H4}"
                                           Foreground="{StaticResource Brush.Text.Primary}">
                                    <Run Text=" ("/>
                                    <Run Text="{Binding EquipmentsCount, Mode=OneWay}"/>
                                    <Run Text=")"/>
                                </TextBlock>
                            </StackPanel>

                            <ItemsControl ItemsSource="{Binding Equipments}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{StaticResource Brush.Background.Tertiary}"
                                                CornerRadius="{StaticResource Radius.LG}"
                                                Padding="12"
                                                Margin="0,0,0,8"
                                                Cursor="Hand">
                                            <Border.InputBindings>
                                                <MouseBinding MouseAction="LeftClick"
                                                              Command="{Binding DataContext.ViewComponentCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                              CommandParameter="{Binding}"/>
                                            </Border.InputBindings>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="{Binding Name}"
                                                               Style="{StaticResource Typography.Body.Large}"
                                                               Foreground="{StaticResource Brush.Text.Primary}"/>
                                                    <TextBlock Text="{Binding Description}"
                                                               Style="{StaticResource Typography.Body.Large}"
                                                               Foreground="{StaticResource Brush.Text.Secondary}"/>
                                                </StackPanel>
                                                <Border Grid.Column="1"
                                                        Background="{Binding StatusBackground}"
                                                        BorderBrush="{Binding StatusBorder}"
                                                        BorderThickness="{StaticResource Border.Thin}"
                                                        CornerRadius="{StaticResource Radius.MD}"
                                                        Padding="8,4"
                                                        VerticalAlignment="Top">
                                                    <TextBlock Text="{Binding Status}"
                                                               Style="{StaticResource Typography.Body.Small}"
                                                               Foreground="{Binding StatusForeground, FallbackValue={StaticResource Brush.Text.Primary}, TargetNullValue={StaticResource Brush.Text.Primary}}"/>
                                                </Border>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <!-- Empty State -->
                            <TextBlock Text="{lex:Loc Key=Dashboard_NoEquipments}"
                                       Style="{StaticResource Typography.Body.Large}"
                                       Foreground="{StaticResource Brush.Text.Secondary}"
                                       HorizontalAlignment="Center"
                                       Visibility="{Binding HasNoEquipments, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Visible}"/>
                        </StackPanel>
                    </Border>

                    <!-- Systems Card -->
                    <Border Grid.Row="0" Grid.Column="2"
                            Background="{StaticResource Brush.Surface.Primary}"
                            BorderBrush="{StaticResource Brush.Border.Primary}"
                            BorderThickness="{StaticResource Border.Thin}"
                            CornerRadius="{StaticResource Radius.LG}"
                            Padding="24"
                            Margin="0,0,0,24"
                            MinHeight="140">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                <TextBlock Text="{lex:Loc Key=Dashboard_Systems}"
                                           Style="{StaticResource Typography.H4}"
                                           Foreground="{StaticResource Brush.Text.Primary}"/>
                                <TextBlock Style="{StaticResource Typography.H4}"
                                           Foreground="{StaticResource Brush.Text.Primary}">
                                    <Run Text=" ("/>
                                    <Run Text="{Binding SystemsCount, Mode=OneWay}"/>
                                    <Run Text=")"/>
                                </TextBlock>
                            </StackPanel>

                            <ItemsControl ItemsSource="{Binding Systems}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{StaticResource Brush.Background.Tertiary}"
                                                CornerRadius="{StaticResource Radius.LG}"
                                                Padding="12"
                                                Margin="0,0,0,8"
                                                Cursor="Hand">
                                            <Border.InputBindings>
                                                <MouseBinding MouseAction="LeftClick"
                                                              Command="{Binding DataContext.ViewComponentCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                              CommandParameter="{Binding}"/>
                                            </Border.InputBindings>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="{Binding Name}"
                                                               Style="{StaticResource Typography.Body.Large}"
                                                               Foreground="{StaticResource Brush.Text.Primary}"/>
                                                    <TextBlock Text="{Binding Description}"
                                                               Style="{StaticResource Typography.Body.Large}"
                                                               Foreground="{StaticResource Brush.Text.Secondary}"/>
                                                </StackPanel>
                                                <Border Grid.Column="1"
                                                        Background="{Binding StatusBackground}"
                                                        BorderBrush="{Binding StatusBorder}"
                                                        BorderThickness="{StaticResource Border.Thin}"
                                                        CornerRadius="{StaticResource Radius.MD}"
                                                        Padding="8,4"
                                                        VerticalAlignment="Top">
                                                    <TextBlock Text="{Binding Status}"
                                                               Style="{StaticResource Typography.Body.Small}"
                                                               Foreground="{Binding StatusForeground, FallbackValue={StaticResource Brush.Text.Primary}, TargetNullValue={StaticResource Brush.Text.Primary}}"/>
                                                </Border>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <!-- Empty State -->
                            <TextBlock Text="{lex:Loc Key=Dashboard_NoSystems}"
                                       Style="{StaticResource Typography.Body.Large}"
                                       Foreground="{StaticResource Brush.Text.Secondary}"
                                       HorizontalAlignment="Center"
                                       Visibility="{Binding HasNoSystems, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Visible}"/>
                        </StackPanel>
                    </Border>

                    <!-- Units Card -->
                    <Border Grid.Row="1" Grid.Column="0"
                            Background="{StaticResource Brush.Surface.Primary}"
                            BorderBrush="{StaticResource Brush.Border.Primary}"
                            BorderThickness="{StaticResource Border.Thin}"
                            CornerRadius="{StaticResource Radius.LG}"
                            Padding="24"
                            MinHeight="160">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                <TextBlock Text="{lex:Loc Key=Dashboard_Units}"
                                           Style="{StaticResource Typography.H4}"
                                           Foreground="{StaticResource Brush.Text.Primary}"/>
                                <TextBlock Style="{StaticResource Typography.H4}"
                                           Foreground="{StaticResource Brush.Text.Primary}">
                                    <Run Text=" ("/>
                                    <Run Text="{Binding UnitsCount, Mode=OneWay}"/>
                                    <Run Text=")"/>
                                </TextBlock>
                            </StackPanel>

                            <ItemsControl ItemsSource="{Binding Units}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{StaticResource Brush.Background.Tertiary}"
                                                CornerRadius="{StaticResource Radius.LG}"
                                                Padding="12"
                                                Margin="0,0,0,8"
                                                Cursor="Hand">
                                            <Border.InputBindings>
                                                <MouseBinding MouseAction="LeftClick"
                                                              Command="{Binding DataContext.ViewComponentCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                              CommandParameter="{Binding}"/>
                                            </Border.InputBindings>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="{Binding Name}"
                                                               Style="{StaticResource Typography.Body.Large}"
                                                               Foreground="{StaticResource Brush.Text.Primary}"/>
                                                    <TextBlock Text="{Binding Description}"
                                                               Style="{StaticResource Typography.Body.Large}"
                                                               Foreground="{StaticResource Brush.Text.Secondary}"/>
                                                </StackPanel>
                                                <Border Grid.Column="1"
                                                        Background="{Binding StatusBackground}"
                                                        BorderBrush="{Binding StatusBorder}"
                                                        BorderThickness="{StaticResource Border.Thin}"
                                                        CornerRadius="{StaticResource Radius.MD}"
                                                        Padding="8,4"
                                                        VerticalAlignment="Top">
                                                    <TextBlock Text="{Binding Status}"
                                                               Style="{StaticResource Typography.Body.Small}"
                                                               Foreground="{Binding StatusForeground, FallbackValue={StaticResource Brush.Text.Primary}, TargetNullValue={StaticResource Brush.Text.Primary}}"/>
                                                </Border>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <!-- Empty State -->
                            <TextBlock Text="{lex:Loc Key=Dashboard_NoUnits}"
                                       Style="{StaticResource Typography.Body.Large}"
                                       Foreground="{StaticResource Brush.Text.Secondary}"
                                       HorizontalAlignment="Center"
                                       Visibility="{Binding HasNoUnits, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Visible}"/>
                        </StackPanel>
                    </Border>

                    <!-- Devices Card -->
                    <Border Grid.Row="1" Grid.Column="2"
                            Background="{StaticResource Brush.Surface.Primary}"
                            BorderBrush="{StaticResource Brush.Border.Primary}"
                            BorderThickness="{StaticResource Border.Thin}"
                            CornerRadius="{StaticResource Radius.LG}"
                            Padding="24"
                            MinHeight="160">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                <TextBlock Text="{lex:Loc Key=Dashboard_Devices}"
                                           Style="{StaticResource Typography.H4}"
                                           Foreground="{StaticResource Brush.Text.Primary}"/>
                                <TextBlock Style="{StaticResource Typography.H4}"
                                           Foreground="{StaticResource Brush.Text.Primary}">
                                    <Run Text=" ("/>
                                    <Run Text="{Binding DevicesCount, Mode=OneWay}"/>
                                    <Run Text=")"/>
                                </TextBlock>
                            </StackPanel>

                            <ItemsControl ItemsSource="{Binding Devices}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="{StaticResource Brush.Background.Tertiary}"
                                                CornerRadius="{StaticResource Radius.LG}"
                                                Padding="12"
                                                Margin="0,0,0,8"
                                                Cursor="Hand">
                                            <Border.InputBindings>
                                                <MouseBinding MouseAction="LeftClick"
                                                              Command="{Binding DataContext.ViewComponentCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                              CommandParameter="{Binding}"/>
                                            </Border.InputBindings>
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="{Binding Name}"
                                                               Style="{StaticResource Typography.Body.Large}"
                                                               Foreground="{StaticResource Brush.Text.Primary}"/>
                                                    <TextBlock Text="{Binding Description}"
                                                               Style="{StaticResource Typography.Body.Large}"
                                                               Foreground="{StaticResource Brush.Text.Secondary}"/>
                                                </StackPanel>
                                                <Border Grid.Column="1"
                                                        Background="{Binding StatusBackground}"
                                                        BorderBrush="{Binding StatusBorder}"
                                                        BorderThickness="{StaticResource Border.Thin}"
                                                        CornerRadius="{StaticResource Radius.MD}"
                                                        Padding="8,4"
                                                        VerticalAlignment="Top">
                                                    <TextBlock Text="{Binding Status}"
                                                               Style="{StaticResource Typography.Body.Small}"
                                                               Foreground="{Binding StatusForeground, FallbackValue={StaticResource Brush.Text.Primary}, TargetNullValue={StaticResource Brush.Text.Primary}}"/>
                                                </Border>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <!-- Empty State -->
                            <TextBlock Text="{lex:Loc Key=Dashboard_NoDevices}"
                                       Style="{StaticResource Typography.Body.Large}"
                                       Foreground="{StaticResource Brush.Text.Secondary}"
                                       HorizontalAlignment="Center"
                                       Visibility="{Binding HasNoDevices, Converter={StaticResource BoolToVisibilityConverter}, FallbackValue=Visible}"/>
                        </StackPanel>
                    </Border>
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>