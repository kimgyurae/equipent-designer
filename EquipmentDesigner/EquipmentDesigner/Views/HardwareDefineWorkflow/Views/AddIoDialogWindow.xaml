<Window x:Class="EquipmentDesigner.Views.HardwareDefineWorkflow.AddIoDialogWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:lex="http://wpflocalizeextension.codeplex.com"
        lex:LocalizeDictionary.DesignCulture="ko"
        lex:ResxLocalizationProvider.DefaultAssembly="EquipmentDesigner"
        lex:ResxLocalizationProvider.DefaultDictionary="Resources.Strings"
        mc:Ignorable="d"
        Title="{lex:Loc Key=Device_AddIoConfiguration}"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Width="534" Height="420">

    <Border Background="{StaticResource Brush.Surface.Primary}"
            BorderBrush="{StaticResource Brush.Border.Primary}"
            BorderThickness="1"
            CornerRadius="{StaticResource Radius.XL}"
            Padding="24">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header with Close Button -->
            <Grid Grid.Row="0" Margin="0,0,0,16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Title Section -->
                <StackPanel Grid.Column="0">
                    <TextBlock Text="{lex:Loc Key=Device_AddIoConfiguration}"
                               Style="{StaticResource Typography.H4}"
                               Foreground="{StaticResource Brush.Text.Primary}"/>
                    <TextBlock Text="{lex:Loc Key=Device_AddIoConfigurationDescription}"
                               Style="{StaticResource Typography.Body}"
                               Foreground="{StaticResource Brush.Text.Secondary}"
                               Margin="0,8,0,0"/>
                </StackPanel>

                <!-- Close Button -->
                <Button Grid.Column="1"
                        Command="{Binding CancelCommand}"
                        Background="Transparent"
                        BorderThickness="0"
                        Cursor="Hand"
                        Padding="4"
                        Opacity="0.7"
                        VerticalAlignment="Top">
                    <Path Data="M6 18L18 6M6 6l12 12"
                          Stroke="{StaticResource Brush.Text.Primary}"
                          StrokeThickness="2"
                          Width="16" Height="16"
                          Stretch="Uniform"/>
                </Button>
            </Grid>

            <!-- Form Content -->
            <StackPanel Grid.Row="1" Margin="0,16,0,16">
                <!-- IO Name -->
                <StackPanel Margin="0,0,0,16">
                    <TextBlock Text="{lex:Loc Key=Device_IoName}"
                               Style="{StaticResource Typography.Label}"
                               Foreground="{StaticResource Brush.Text.Primary}"
                               Margin="0,0,0,8"/>
                    <TextBox Text="{Binding IoName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             Height="{StaticResource Size.Input.Height.MD}"
                             Padding="{StaticResource Spacing.Padding.Input}"
                             Background="{StaticResource Brush.Background.Tertiary}"
                             BorderThickness="0"
                             VerticalContentAlignment="Center">
                        <TextBox.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="{StaticResource Radius.LG}"/>
                            </Style>
                        </TextBox.Resources>
                    </TextBox>
                </StackPanel>

                <!-- Address -->
                <StackPanel Margin="0,0,0,16">
                    <TextBlock Text="{lex:Loc Key=Device_IoAddress}"
                               Style="{StaticResource Typography.Label}"
                               Foreground="{StaticResource Brush.Text.Primary}"
                               Margin="0,0,0,8"/>
                    <TextBox Text="{Binding Address, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             Height="{StaticResource Size.Input.Height.MD}"
                             Padding="{StaticResource Spacing.Padding.Input}"
                             Background="{StaticResource Brush.Background.Tertiary}"
                             BorderThickness="0"
                             VerticalContentAlignment="Center">
                        <TextBox.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="{StaticResource Radius.LG}"/>
                            </Style>
                        </TextBox.Resources>
                    </TextBox>
                </StackPanel>

                <!-- Type -->
                <StackPanel>
                    <TextBlock Text="{lex:Loc Key=Device_IoType}"
                               Style="{StaticResource Typography.Label}"
                               Foreground="{StaticResource Brush.Text.Primary}"
                               Margin="0,0,0,8"/>
                    <ComboBox ItemsSource="{Binding AvailableIoTypes}"
                              SelectedItem="{Binding IoType, Mode=TwoWay}"
                              Style="{StaticResource StyledComboBox}"
                              Height="{StaticResource Size.Input.Height.MD}"/>
                </StackPanel>
            </StackPanel>

            <!-- Footer Buttons -->
            <StackPanel Grid.Row="2"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,16,0,0">
                <!-- Cancel Button -->
                <Button Command="{Binding CancelCommand}"
                        Padding="16,8"
                        Height="{StaticResource Size.Button.Height.MD}"
                        Background="{StaticResource Brush.Surface.Primary}"
                        BorderBrush="{StaticResource Brush.Border.Primary}"
                        BorderThickness="1"
                        Cursor="Hand"
                        Margin="0,0,8,0">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="{StaticResource Radius.LG}"/>
                        </Style>
                    </Button.Resources>
                    <TextBlock Text="{lex:Loc Key=Common_Cancel}"
                               Style="{StaticResource Typography.Button}"
                               Foreground="{StaticResource Brush.Text.Primary}"/>
                </Button>

                <!-- Add IO Button -->
                <Button Command="{Binding AddIoCommand}"
                        Padding="16,8"
                        Height="{StaticResource Size.Button.Height.MD}"
                        BorderThickness="0"
                        Cursor="Hand">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="{StaticResource Radius.LG}"/>
                        </Style>
                    </Button.Resources>
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Background" Value="{StaticResource Brush.Button.Primary.Background}"/>
                            <Style.Triggers>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="{StaticResource Brush.Button.Disabled.Background}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                    <TextBlock Text="{lex:Loc Key=Device_AddIo}">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock" BasedOn="{StaticResource Typography.Button}">
                                <Setter Property="Foreground" Value="{StaticResource Brush.Text.Inverse}"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsEnabled, RelativeSource={RelativeSource AncestorType=Button}}" Value="False">
                                        <Setter Property="Foreground" Value="{StaticResource Brush.Button.Disabled.Foreground}"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </Button>
            </StackPanel>
        </Grid>
    </Border>
</Window>