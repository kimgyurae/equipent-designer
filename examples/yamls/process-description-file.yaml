# ============================================================================
# LaserBurr Process Description File v3
# ============================================================================
# 설계 원칙:
# - System Process: 모든 상태에서 CheckSubsystemState만 사용 (하위 Unit 상태 동기화)
# - Unit Process: Execute 상태에서 세부 Step 정의 (Device 직접 제어)
# - Hardware-Process 1:1 매핑: 7 Systems + 16 Units = 23 Processes
# Based on: D:\SW\laser-burr\LaserBurr\Process.cs, Define_Step.cs, IO.cs analysis
# ============================================================================

EquipmentName: LaserBurrMachine
DocumentType: ProcessDescriptionFile

# Reference to Hardware Description File
HardwareDescriptionFile: "./hardware-description-file.yaml"

ReusableSteps:
  - Name: CheckSubsystemState
    ImplementationInstructions:
      - "이 스탭은 하위 하드웨어의 상태를 확인하여, 다음 스테이트로 자동 전환될 수 있는 상태인지 확인한다."
      - "이 스탭을 하위 하드웨어를 가지는 모든 하드웨어의 마지막 스탭으로 추가하면, 하위 하드웨어의 상태에 맞춰 상위 하드웨어의 상태가 싱크된다."
      - "이 스탭을 제거하면, 하위 하드웨어의 상태와 상위 하드웨어의 상태가 싱크되지 않는데, 예를 들어, 하위 하드웨어의 상태가 EXECUTE인데, 상위 하드웨어의 상태가 COMPLETE이 될 수 있음."

Processes:

  # ==========================================================================
  # SYSTEM PROCESSES (7 Systems)
  # System은 하위 Unit을 추상화된 레벨에서 제어하므로 CheckSubsystemState만 사용
  # ==========================================================================

  # --------------------------------------------------------------------------
  # 1. Loading System Process
  # --------------------------------------------------------------------------
  - Owner: Loading
    OwnerType: System
    Description: Loading System 프로세스 - OPShutter, SafetyInterlock Unit 상태 동기화
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # --------------------------------------------------------------------------
  # 2. Unloading System Process
  # --------------------------------------------------------------------------
  - Owner: Unloading
    OwnerType: System
    Description: Unloading System 프로세스 - MaterialDetection Unit 상태 동기화
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # --------------------------------------------------------------------------
  # 3. Suction System Process
  # --------------------------------------------------------------------------
  - Owner: Suction
    OwnerType: System
    Description: Suction System 프로세스 - Vacuum, Clamp Unit 상태 동기화
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # --------------------------------------------------------------------------
  # 4. Stage System Process
  # --------------------------------------------------------------------------
  - Owner: Stage
    OwnerType: System
    Description: Stage System 프로세스 - Head, StageY, Table Unit 상태 동기화
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # --------------------------------------------------------------------------
  # 5. Vision System Process
  # --------------------------------------------------------------------------
  - Owner: Vision
    OwnerType: System
    Description: Vision System 프로세스 - Alignment, Inspection, Measurement Unit 상태 동기화
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # --------------------------------------------------------------------------
  # 6. Laser System Process
  # --------------------------------------------------------------------------
  - Owner: Laser
    OwnerType: System
    Description: Laser System 프로세스 - LaserControl, Chiller Unit 상태 동기화
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # --------------------------------------------------------------------------
  # 7. Co2Clean System Process
  # --------------------------------------------------------------------------
  - Owner: Co2Clean
    OwnerType: System
    Description: Co2Clean System 프로세스 - Nozzle, Valve, Fume Unit 상태 동기화
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # ==========================================================================
  # UNIT PROCESSES (17 Units)
  # Unit은 Device를 직접 제어하므로 Execute 상태에서 세부 Step 정의
  # ==========================================================================

  # --------------------------------------------------------------------------
  # Loading System Units
  # --------------------------------------------------------------------------

  # 8. OPShutter Unit Process
  - Owner: OPShutter
    OwnerType: Unit
    Description: OP측 셔터 제어 프로세스 - IN_OP_SIDE_SHUTTER_UP/DN, OUT_OP_SHUTTER_UP/DN_SOL
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: WaitShutterCommand
            ImplementationInstructions:
              - "셔터 동작 명령 대기"
              - "명령 종류: Open (UP) 또는 Close (DN)"
          - Name: ActivateShutterSolenoid
            ImplementationInstructions:
              - "셔터 솔레노이드 활성화"
              - "UP 동작: OUT_OP_SHUTTER_UP_SOL (0x0010) ON"
              - "DN 동작: OUT_OP_SHUTTER_DN_SOL (0x0011) ON"
          - Name: WaitShutterPosition
            ImplementationInstructions:
              - "셔터 위치 센서 확인 대기"
              - "UP 센서: IN_OP_SIDE_SHUTTER_UP (0x0020)"
              - "DN 센서: IN_OP_SIDE_SHUTTER_DN (0x0021)"
          - Name: CompleteShutterMove
            ImplementationInstructions:
              - "셔터 동작 완료 처리"
              - "솔레노이드 OFF 및 상태 업데이트"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # 9. SafetyInterlock Unit Process
  - Owner: SafetyInterlock
    OwnerType: Unit
    Description: 안전 인터록 모니터링 프로세스 - EMO, Door, Light Curtain 상태 감시
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckEmoStatus
            ImplementationInstructions:
              - "EMO 스위치 상태 확인"
              - "IN_EMO1 (0x0006), IN_EMO2 (0x0007), IN_EMO3 (0x0008), IN_EMO4 (0x0009)"
          - Name: CheckDoorStatus
            ImplementationInstructions:
              - "도어 센서 상태 확인"
              - "IN_DOOR1 (0x000A), IN_DOOR2 (0x000B), IN_DOOR3 (0x000C)"
              - "IN_DOOR1_LOCK (0x000D), IN_DOOR2_LOCK (0x000E), IN_DOOR3_LOCK (0x000F)"
          - Name: CheckLightCurtain
            ImplementationInstructions:
              - "라이트 커튼 상태 확인"
              - "IN_LIGHT_CURTAIN_OUT1 (0x0025), IN_LIGHT_CURTAIN_OUT2 (0x0026)"
              - "IN_LIGHT_CURTAIN_DETECT (0x0027)"
          - Name: CheckInterlockConditions
            ImplementationInstructions:
              - "종합 인터록 조건 평가"
              - "Main CDA: IN_MAIN_CDA (0x0004), Sub CDA: IN_SUB_CDA (0x0005)"
          - Name: UpdateSafetyState
            ImplementationInstructions:
              - "안전 상태 업데이트 및 알람 처리"
              - "서보 정지 신호: OUT_EQP_SERVO_STOP (0x0008)"
              - "도어 잠금: OUT_DOOR_LOCK_SOL (0x0001)"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # --------------------------------------------------------------------------
  # Unloading System Units
  # --------------------------------------------------------------------------

  # 10. MaterialDetection Unit Process
  - Owner: MaterialDetection
    OwnerType: Unit
    Description: 자재 감지 프로세스 - LDS 및 Gasket 감지 (LOAD/REPLACE 워크플로우)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: InitializeLdsSensor1
            ImplementationInstructions:
              - "LDS 센서 초기화"
              - "OUT_LDS_ZERO_SET (0x0014) 사용하여 영점 설정"
          - Name: CheckMaterialPresence
            ImplementationInstructions:
              - "자재 유무 확인"
              - "AUTO_STEP.LOAD_POS_START (200) 참조"
          - Name: ValidateLdsSignal
            ImplementationInstructions:
              - "LDS 감지 신호 검증"
              - "IN_LDS_DETECT (0x0023)"
          - Name: ValidateGasketSignal
            ImplementationInstructions:
              - "Gasket 감지 신호 검증"
              - "IN_GASKET_DETECT (0x0024)"
          - Name: ReportDetectionResult
            ImplementationInstructions:
              - "감지 결과 리포트 및 상위 시스템 통보"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # --------------------------------------------------------------------------
  # Suction System Units
  # --------------------------------------------------------------------------

  # 11. Vacuum Unit Process
  - Owner: Vacuum
    OwnerType: Unit
    Description: 진공 흡착 제어 프로세스 - Gasket 진공 흡착 (OUT_GASKET_VAC_SOL)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: ActivateVacuum
            ImplementationInstructions:
              - "진공 솔레노이드 활성화"
              - "OUT_GASKET_VAC_SOL (0x0020) ON"
          - Name: WaitVacuumEstablished
            ImplementationInstructions:
              - "진공 압력 형성 대기"
              - "IN_GASKET_VAC_ON (0x1013) 확인"
          - Name: MonitorVacuumPressure
            ImplementationInstructions:
              - "진공 압력 모니터링"
              - "지속적인 진공 유지 상태 확인"
          - Name: ReleaseVacuum
            ImplementationInstructions:
              - "진공 해제"
              - "OUT_GASKET_VAC_SOL (0x0020) OFF"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # 12. Clamp Unit Process
  - Owner: Clamp
    OwnerType: Unit
    Description: 클램프 실린더 제어 프로세스 - Gasket 클램핑 (OUT_GASKET_CYL_UP/DN_SOL)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: ActivateClampDown
            ImplementationInstructions:
              - "클램프 하강"
              - "OUT_GASKET_CYL_DN_SOL (0x0022) ON"
          - Name: WaitClampDownPosition
            ImplementationInstructions:
              - "클램프 하강 완료 대기"
              - "IN_GASKET_CYL_DN (0x1012) 확인"
          - Name: VerifyClampState
            ImplementationInstructions:
              - "클램핑 상태 검증"
              - "자재 고정 상태 확인"
          - Name: ActivateClampUp
            ImplementationInstructions:
              - "클램프 상승"
              - "OUT_GASKET_CYL_UP_SOL (0x0021) ON"
          - Name: WaitClampUpPosition
            ImplementationInstructions:
              - "클램프 상승 완료 대기"
              - "IN_GASKET_CYL_UP (0x1011) 확인"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # --------------------------------------------------------------------------
  # Stage System Units
  # --------------------------------------------------------------------------

  # 13. Head Unit Process
  - Owner: Head
    OwnerType: Unit
    Description: Head Z/X축 모션 제어 프로세스 - WMX3 모션 컨트롤러 (INIT_STEP.HEAD_Z/X_HOME)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: InitializeHeadAxes
            ImplementationInstructions:
              - "Head Z/X축 초기화"
              - "WMX3 모션 컨트롤러 연결 확인"
          - Name: EnableHeadServo
            ImplementationInstructions:
              - "Head 서보 드라이버 Enable"
          - Name: MoveHeadZAxis
            ImplementationInstructions:
              - "Head Z축 이동"
              - "Reference: INIT_STEP.HEAD_Z_HOME_START (120)"
              - "안전을 위해 Z축을 먼저 홈으로 이동 (워크피스에서 멀어짐)"
          - Name: WaitHeadZComplete
            ImplementationInstructions:
              - "Head Z축 이동 완료 대기"
              - "Reference: INIT_STEP.HEAD_Z_HOME_WAIT (121)"
          - Name: MoveHeadXAxis
            ImplementationInstructions:
              - "Head X축 이동"
              - "Reference: INIT_STEP.HEAD_X_HOME_START (130)"
          - Name: WaitHeadXComplete
            ImplementationInstructions:
              - "Head X축 이동 완료 대기"
              - "Reference: INIT_STEP.HEAD_X_HOME_WAIT (131)"
          - Name: VerifyHeadPosition
            ImplementationInstructions:
              - "Head 위치 검증"
              - "End Position 이동 완료 확인"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # 14. StageY Unit Process
  - Owner: StageY
    OwnerType: Unit
    Description: Stage Y축 모션 제어 프로세스 - WMX3 모션 컨트롤러 (INIT_STEP.STAGE_Y_HOME)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: InitializeStageYAxis
            ImplementationInstructions:
              - "Stage Y축 초기화"
              - "WMX3 모션 컨트롤러 연결 확인"
          - Name: EnableStageYServo
            ImplementationInstructions:
              - "Stage Y축 서보 Enable"
          - Name: MoveStageYAxis
            ImplementationInstructions:
              - "Stage Y축 이동"
              - "Reference: INIT_STEP.STAGE_Y_HOME_START (140)"
          - Name: WaitStageYComplete
            ImplementationInstructions:
              - "Stage Y축 이동 완료 대기"
              - "Reference: INIT_STEP.STAGE_Y_HOME_WAIT (141)"
          - Name: VerifyStageYPosition
            ImplementationInstructions:
              - "Stage Y축 위치 검증"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # 15. Table Unit Process
  - Owner: Table
    OwnerType: Unit
    Description: Table X/Y/T축 모션 제어 프로세스 - WMX3 모션 컨트롤러 (INIT_STEP.TABLE_X/Y/T_HOME)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: InitializeTableAxes
            ImplementationInstructions:
              - "Table X/Y/T축 초기화"
              - "WMX3 모션 컨트롤러 연결 확인"
          - Name: EnableTableServo
            ImplementationInstructions:
              - "Table 서보 드라이버 Enable"
          - Name: MoveTableXAxis
            ImplementationInstructions:
              - "Table X축 이동"
              - "Reference: INIT_STEP.TABLE_X_HOME_START (150)"
          - Name: WaitTableXComplete
            ImplementationInstructions:
              - "Table X축 이동 완료 대기"
              - "Reference: INIT_STEP.TABLE_X_HOME_WAIT (151)"
          - Name: MoveTableYAxis
            ImplementationInstructions:
              - "Table Y축 이동"
              - "Reference: INIT_STEP.TABLE_Y_HOME_START (160)"
          - Name: WaitTableYComplete
            ImplementationInstructions:
              - "Table Y축 이동 완료 대기"
              - "Reference: INIT_STEP.TABLE_Y_HOME_WAIT (161)"
          - Name: MoveTableTAxis
            ImplementationInstructions:
              - "Table T축(Theta) 이동"
              - "Reference: INIT_STEP.TABLE_T_HOME_START (170)"
          - Name: WaitTableTComplete
            ImplementationInstructions:
              - "Table T축 이동 완료 대기"
              - "Reference: INIT_STEP.TABLE_T_HOME_WAIT (171)"
          - Name: VerifyTablePosition
            ImplementationInstructions:
              - "Table 전체 위치 검증"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # --------------------------------------------------------------------------
  # Vision System Units
  # --------------------------------------------------------------------------

  # 16. Alignment Unit Process
  - Owner: Alignment
    OwnerType: Unit
    Description: 비전 얼라인먼트 프로세스 - MELSEC/PLC 카메라 통신 (AUTO_STEP.ALIGN 300-307)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: InitializeAlignmentCamera
            ImplementationInstructions:
              - "얼라인먼트 카메라 초기화"
              - "MELSEC PLC 통신 연결 확인"
          - Name: MoveToAlignmentPosition
            ImplementationInstructions:
              - "얼라인먼트 위치로 스테이지 이동"
              - "Reference: AUTO_STEP.ALIGN_POS_START (300)"
          - Name: RequestCameraCapture
            ImplementationInstructions:
              - "카메라 캡처 요청 (MELSEC 통신)"
              - "Reference: AUTO_STEP.ALIGN_PROCESS_START (302)"
          - Name: WaitCaptureComplete1
            ImplementationInstructions:
              - "캡처 완료 대기"
              - "Reference: AUTO_STEP.ALIGN_PROCESS_WAIT (303)"
          - Name: AnalyzeAlignmentData
            ImplementationInstructions:
              - "얼라인먼트 이미지 분석"
              - "Reference: AUTO_STEP.ALIGN_RESULT (304)"
          - Name: CalculateOffset
            ImplementationInstructions:
              - "X/Y/T 오프셋 계산"
          - Name: ApplyAlignmentCorrection
            ImplementationInstructions:
              - "오프셋 보정 적용"
              - "Reference: AUTO_STEP.ALIGN_CORRECTION (305)"
          - Name: VerifyAlignment
            ImplementationInstructions:
              - "얼라인먼트 정확도 검증"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # 17. Inspection Unit Process
  - Owner: Inspection
    OwnerType: Unit
    Description: 비전 검사 프로세스 - Pre/Post 레이저 가공 검사 (AUTO_STEP.INSP/RINSP 400-407, 800-807)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: InitializeInspectionCamera
            ImplementationInstructions:
              - "검사 카메라 초기화"
          - Name: MoveToInspectionPosition
            ImplementationInstructions:
              - "검사 위치로 스테이지 이동"
              - "Reference: AUTO_STEP.INSP_POS_START (400)"
          - Name: RequestInspectionCapture
            ImplementationInstructions:
              - "검사 이미지 캡처 요청"
              - "Reference: AUTO_STEP.INSP_PROCESS_START (402)"
          - Name: WaitCaptureComplete2
            ImplementationInstructions:
              - "캡처 완료 대기"
              - "Reference: AUTO_STEP.INSP_PROCESS_WAIT (403)"
          - Name: AnalyzeInspectionImage
            ImplementationInstructions:
              - "검사 이미지 분석 (버 형태, 크기, 위치)"
              - "Reference: AUTO_STEP.INSP_RESULT (404)"
          - Name: EvaluateInspectionResult
            ImplementationInstructions:
              - "검사 결과 평가 (Pass/Fail 판정)"
          - Name: ReportInspectionStatus
            ImplementationInstructions:
              - "검사 결과 리포트 및 로깅"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # 18. Measurement Unit Process
  - Owner: Measurement
    OwnerType: Unit
    Description: LDS 측정 프로세스 - 버 높이 측정 (AUTO_STEP.MEAS 500-506)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: InitializeLdsSensor2
            ImplementationInstructions:
              - "LDS 센서 초기화"
              - "AD_BURR_HEIGHT_SENSOR (64) 아날로그 입력 채널"
          - Name: MoveToMeasurementPosition
            ImplementationInstructions:
              - "측정 위치로 스테이지 이동"
              - "Reference: AUTO_STEP.MEAS_POS_START (500)"
          - Name: SetLdsZeroPoint
            ImplementationInstructions:
              - "LDS 영점 설정"
              - "OUT_LDS_ZERO_SET (0x0014)"
          - Name: TriggerMeasurement
            ImplementationInstructions:
              - "측정 트리거"
              - "Reference: AUTO_STEP.MEAS_PROCESS_START (502)"
          - Name: WaitMeasurementComplete
            ImplementationInstructions:
              - "측정 완료 대기"
              - "Reference: AUTO_STEP.MEAS_PROCESS_WAIT (503)"
          - Name: ReadMeasurementData
            ImplementationInstructions:
              - "아날로그 측정값 읽기"
              - "Reference: AUTO_STEP.MEAS_RESULT (504)"
          - Name: ValidateMeasurementRange
            ImplementationInstructions:
              - "측정값 범위 검증"
          - Name: StoreMeasurementResult
            ImplementationInstructions:
              - "측정 결과 저장"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # --------------------------------------------------------------------------
  # Laser System Units
  # --------------------------------------------------------------------------

  # 19. LaserControl Unit Process
  - Owner: LaserControl
    OwnerType: Unit
    Description: 레이저 제어 프로세스 - 레이저 셔터/출력 제어 (AUTO_STEP.LASER 600-612)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckLaserStatus
            ImplementationInstructions:
              - "레이저 상태 확인"
              - "IN_LASER_OK_SIGNAL (0x0032)"
          - Name: CheckLaserFaults
            ImplementationInstructions:
              - "레이저 Fault 확인"
              - "IN_LASER_AORF_OVERTEMP_FLT (0x0033)"
              - "IN_LASER_AOM_CELL_OT_FLT (0x0034)"
              - "IN_LASER_AORF_VSMR_FAULT (0x0035)"
              - "IN_LASER_SUPPLY_OT (0x0036)"
              - "IN_LASER_SUPPLY_VSMR_FAULT (0x0037)"
              - "IN_LASER_AORF_POWER_FLT (0x0038)"
          - Name: EnableLaserReady
            ImplementationInstructions:
              - "레이저 Ready 신호 출력"
              - "OUT_LASER_READY_OK (0x0015)"
          - Name: OpenLaserShutter
            ImplementationInstructions:
              - "레이저 셔터 열기"
              - "OUT_LASER_SHUTTER_OPEN_SOL (0x0012)"
              - "Reference: AUTO_STEP.LASER_SHUTTER_OPEN_START (606)"
          - Name: WaitShutterOpen
            ImplementationInstructions:
              - "셔터 열림 완료 대기"
              - "IN_LASER_SHUTTER_OPEN (0x0030)"
              - "Reference: AUTO_STEP.LASER_SHUTTER_OPEN_WAIT (607)"
          - Name: ExecuteLaserProcess
            ImplementationInstructions:
              - "레이저 가공 실행"
              - "Reference: AUTO_STEP.LASER_PROCESS_START (608)"
          - Name: MonitorLaserOperation
            ImplementationInstructions:
              - "레이저 동작 모니터링"
              - "Reference: AUTO_STEP.LASER_PROCESS_WAIT (609)"
          - Name: CloseLaserShutter
            ImplementationInstructions:
              - "레이저 셔터 닫기"
              - "OUT_LASER_SHUTTER_CLOSE_SOL (0x0013)"
              - "Reference: AUTO_STEP.LASER_SHUTTER_CLOSE_START (610)"
          - Name: WaitShutterClose
            ImplementationInstructions:
              - "셔터 닫힘 완료 대기"
              - "IN_LASER_SHUTTER_CLOSE (0x0031)"
              - "Reference: AUTO_STEP.LASER_SHUTTER_CLOSE_WAIT (611)"
          - Name: DisableLaserReady
            ImplementationInstructions:
              - "레이저 Ready 신호 해제"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # 20. Chiller Unit Process
  - Owner: Chiller
    OwnerType: Unit
    Description: 칠러 제어 프로세스 - 레이저 냉각 시스템 (IN_CHILLER_RUN/REMOTE/ALARM)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckChillerStatus
            ImplementationInstructions:
              - "칠러 상태 확인"
              - "IN_CHILLER_RUN (0x003B)"
              - "IN_CHILLER_REMOTE (0x003C)"
          - Name: CheckChillerAlarm
            ImplementationInstructions:
              - "칠러 알람 확인"
              - "IN_CHILLER_ALARM (0x003D)"
          - Name: StartChiller
            ImplementationInstructions:
              - "칠러 시작"
              - "OUT_CHILLER_RUN_SIGNAL (0x0016)"
          - Name: WaitChillerReady
            ImplementationInstructions:
              - "칠러 Ready 상태 대기"
          - Name: MonitorChillerTemperature
            ImplementationInstructions:
              - "칠러 온도 모니터링"
          - Name: StopChiller
            ImplementationInstructions:
              - "칠러 정지"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # --------------------------------------------------------------------------
  # Co2Clean System Units
  # --------------------------------------------------------------------------

  # 21. Nozzle Unit Process
  - Owner: Nozzle
    OwnerType: Unit
    Description: CO2 노즐 제어 프로세스 - 노즐 상하 이동 (AUTO_STEP.CLEAN 700-707)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckNozzlePosition
            ImplementationInstructions:
              - "노즐 현재 위치 확인"
              - "IN_CO2_NOZZLE_UP (0x0039)"
              - "IN_CO2_NOZZLE_DN (0x003A)"
          - Name: MoveNozzleDown
            ImplementationInstructions:
              - "노즐 하강"
              - "OUT_CO2_NOZZLE_DN_SOL (0x0018)"
              - "Reference: AUTO_STEP.CLEAN_POS_START (700)"
          - Name: WaitNozzleDownPosition
            ImplementationInstructions:
              - "노즐 하강 완료 대기"
              - "IN_CO2_NOZZLE_DN (0x003A) 확인"
          - Name: ExecuteCleanPosition
            ImplementationInstructions:
              - "클리닝 위치에서 대기"
              - "Reference: AUTO_STEP.CLEAN_PROCESS_START (702)"
          - Name: MoveNozzleUp
            ImplementationInstructions:
              - "노즐 상승"
              - "OUT_CO2_NOZZLE_UP_SOL (0x0017)"
          - Name: WaitNozzleUpPosition
            ImplementationInstructions:
              - "노즐 상승 완료 대기"
              - "IN_CO2_NOZZLE_UP (0x0039) 확인"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # 22. Valve Unit Process
  - Owner: Valve
    OwnerType: Unit
    Description: CO2/CDA 밸브 제어 프로세스 - 가스 공급 제어 (AUTO_STEP.CLEAN 700-707)
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckValveStatus
            ImplementationInstructions:
              - "밸브 상태 확인"
          - Name: EnableCo2System
            ImplementationInstructions:
              - "CO2 시스템 활성화"
              - "OUT_CO2_ON (0x0019)"
          - Name: OpenCo2Valve
            ImplementationInstructions:
              - "CO2 밸브 열기"
              - "OUT_CO2_VALVE_OPEN (0x001A)"
          - Name: FlowCo2Gas
            ImplementationInstructions:
              - "CO2 가스 분사"
              - "클리닝 시간 동안 유지"
          - Name: CloseCo2Valve
            ImplementationInstructions:
              - "CO2 밸브 닫기"
          - Name: OpenCdaValve
            ImplementationInstructions:
              - "CDA 밸브 열기"
              - "OUT_CDA_VALVE_OPEN (0x001B)"
          - Name: FlowCdaGas
            ImplementationInstructions:
              - "CDA 가스 분사 (건조)"
          - Name: CloseCdaValve
            ImplementationInstructions:
              - "CDA 밸브 닫기"
          - Name: DisableCo2System
            ImplementationInstructions:
              - "CO2 시스템 비활성화"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

  # 23. Fume Unit Process
  - Owner: Fume
    OwnerType: Unit
    Description: 흄 집진기 제어 프로세스 - 가공 중 흄 배기
    States:
      - StateName: Idle
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Starting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Execute
        Steps:
          - Name: CheckFumeCollectorStatus
            ImplementationInstructions:
              - "hue 집진기 상태 확인"
          - Name: StartFumeCollector
            ImplementationInstructions:
              - "hue 집진기 가동"
              - "OUT_FUME_RUN_SIGINAL (0x001D)"
          - Name: WaitFumeRunning
            ImplementationInstructions:
              - "hue 집진기 가동 확인"
          - Name: MonitorFumeOperation
            ImplementationInstructions:
              - "hue 집진기 동작 모니터링"
          - Name: StopFumeCollector
            ImplementationInstructions:
              - "hue 집진기 정지"
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Completing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Resetting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Stopping
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Aborting
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Clearing
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Holding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unholding
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Suspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []
      - StateName: Unsuspending
        Steps:
          - Name: CheckSubsystemState
            ImplementationInstructions: []

# ============================================================================
# END OF PROCESS DESCRIPTION FILE
# ============================================================================
# Summary:
# - 7 System Processes (CheckSubsystemState only for ALL states)
#   1. Loading, 2. Unloading, 3. Suction, 4. Stage, 5. Vision, 6. Laser, 7. Co2Clean
# - 16 Unit Processes (Detailed Execute steps, CheckSubsystemState for other states)
#   8. OPShutter, 9. SafetyInterlock, 10. MaterialDetection, 11. Vacuum, 12. Clamp
#   13. Head, 14. StageY, 15. Table, 16. Alignment, 17. Inspection, 18. Measurement
#   19. LaserControl, 20. Chiller, 21. Nozzle, 22. Valve, 23. Fume
# - Total: 23 Processes (1:1 mapping with hardware-description-file3.yaml)
# - Based on: D:\SW\laser-burr\LaserBurr\Process.cs, Define_Step.cs, IO.cs
# ============================================================================